<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>供述と推理</title>
<style>
  p {
    margin: 4px 0;
  }

  body {
    font-family: Arial, "Yu Gothic", sans-serif;
    padding: 20px;
    max-width: 720px;
    margin: 5px;
  }

  .suspect-box {
    display: flex;
    align-items: center;
    gap: 16px; /* 画像と入力欄の間隔 */
    margin-top: 5px;
  }

  .suspect-box img {
    max-width: 15%;
    height: auto;
  }

  input[type=text] {
    padding: 6px;
    font-size: 1rem;
    width: 100px;        /* ← 基本サイズ */
    max-width: 100px;    /* ← スマホの自動拡張を防ぐ */
    box-sizing: border-box;
  }


  button {
    padding: 8px 12px;
    font-size: 1rem;
    margin-left: 8px;
  }

  #result {
    margin-top: 12px;
    font-weight: 600;
  }

  .keyword-image {
    display: none;
    max-width: 200px;
    margin-top: 6px;
  }

  .final-section {
    margin: 0;   /* ← 最小限に */
  }

  .final-section p {
    margin: 0;  /* ← 下だけ少し */
  }

  select {
    padding: 3px;
    font-size: 1rem;
  }

.final-container {
  display: flex;
  gap: 12px;
  align-items: flex-start;
}

.final-left {
  flex: 1;
}

.final-right {
  flex: 1;
  text-align: center;
}

.final-right img {
  max-width: 100%;
  height: auto;
  border: 1px solid #ccc;
}

#crime-room {
  display: inline-block;
  min-width: 140px;     /* 幅を確保（ダイニング／和室でズレない） */
  text-align: center;  /* 文字を中央 */
  margin-left: 0px;   /* ← ここで右に寄せる */
}

#fade {
  position: fixed;
  inset: 0;
  background: black;
  opacity: 0;
  pointer-events: none;
  transition: opacity 2.5s ease;
  z-index: 9999;
}

#fade.active {
  opacity: 2;
}

</style>
</head>
<body>

<h1>容疑者の供述</h1>
<p>【微笑む家主】</p>

<div class="suspect-box">
  <img src="hohoemu.jpg" alt="イラスト">

  <div class="statement">
    <p class="statement-item" data-label="微笑む家主_供述①">
      <span class="label">供述①</span>

      <span class="input-area">
      	<input type="text" class="answer"
               data-correct="DICJLO"
               data-keyword="前半は、おらはずっとおらの椅子に座って微笑んでたけど、最初に寿司が運ばれてくる以外に誰かがリビングを通過したのは1回だけだったな。">
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>

    <p class="statement-item" data-label="微笑む家主_供述②">
      <span class="label">供述②</span>

      <span class="input-area">
        <input type="text" class="answer"
               data-correct="m"
               data-keyword="前半の間、婆はずっとでっけえ声で電話してたな。ほんーに電話ばっかしてんだわ。"> 
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>

    <p class="statement-item" data-label="微笑む家主_供述③">
      <span class="label">供述③</span>

      <span class="input-area">
        <input type="text" class="answer"
               data-correct="コー"
               data-keyword="手を嗅ぐ女が寿司を和室の長テーブルに運んでるときに、おらもちょうど二階に上がったんだわ。事件が起きるまでは上にいたすけ、その間につまみ食いはできね。"> 
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>
  </div>
</div>

<p>-----------------------------</p>

<p>【長電話婆】</p>

<div class="suspect-box">
  <img src="denwa.jpg" alt="イラスト">

  <div class="statement">
    <p class="statement-item" data-label="長電話婆_供述①">
      <span class="label">供述①</span>

      <span class="input-area">
      	<input type="text" class="answer"
               data-correct="国"
               data-keyword="固定電話に出てたから、みんなのことはよく見てなかったけど、唯一、怪しい女が冷蔵庫から醤油とワサビを取り出して、台所の奥に入って行ったのを見た。">
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>

    <p class="statement-item" data-label="長電話婆_供述②">
      <span class="label">供述②</span>

      <span class="input-area">
        <input type="text" class="answer"
               data-correct="79"
               data-keyword="後半は私がトイレに籠っていたら、トイレの前を誰かが通ったみたい。"> 
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>
  </div>
</div>

<p>-----------------------------</p>

<p>【防寒男】</p>

<div class="suspect-box">
  <img src="boukan.jpg" alt="イラスト">

  <div class="statement">
    <p class="statement-item" data-label="防寒男_供述①">
      <span class="label">供述①</span>

      <span class="input-area">
      	<input type="text" class="answer"
               data-correct="36BrSe52"
               data-keyword="今日は私が最初に玄関で寿司を受け取り、ダイニングテーブルまで運びました。その間寿司桶の蓋は空けてないです。">
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>

    <p class="statement-item" data-label="防寒男_供述②">
      <span class="label">供述②</span>

      <span class="input-area">
        <input type="text" class="answer"
               data-correct="ACACBD"
               data-keyword="後半の最初の方で、突如ベランダの戸が空いたので寒くてダイニングテーブルの奥側に避難しました。そのあとずっとそこにいましたが、玄関の方に出ていく人はいませんでした。もしいたら視界に入るはずです。"> 
      <button class="send">送信</button></span>

      <span class="result">
          <div class="keyword-text"></div>
  	  <img src="sisen.jpg" class="keyword-image">
      </span>
    </p>
  </div>
</div>

<p>-----------------------------</p>

<p>【手を嗅ぐ女】</p>

<div class="suspect-box">
  <img src="tewokagu.jpg" alt="イラスト">

  <div class="statement">
    <p class="statement-item" data-label="手を嗅ぐ女_供述①">
      <span class="label">供述①</span>

      <span class="input-area">
      	<input type="text" class="answer"
               data-correct="かに"
               data-keyword="私はウニが嫌いだから、何があっても食べないよ。手が匂う...">
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>

    <p class="statement-item" data-label="手を嗅ぐ女_供述②">
      <span class="label">供述②</span>

      <span class="input-area">
        <input type="text" class="answer"
               data-correct="D2K85R"
               data-keyword="防寒男は寿司を運んだあとすぐに玄関で一度脱いだコートを取りに行ってたよ。よっぽど寒かったんだろうね。"> 
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>

    <p class="statement-item" data-label="手を嗅ぐ女_供述③">
      <span class="label">供述③</span>

      <span class="input-area">
        <input type="text" class="answer"
               data-correct="くものす"
               data-keyword="ベランダの戸が空いた後、怪しい女はベランダに出ていったよ。あと、醤油とワサビを混ぜて何かやってたみたい。すごく集中してたけど。"> 
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>
  </div>
</div>

<p>-----------------------------</p>

<p>【困り顔の男】</p>

<div class="suspect-box">
  <img src="komarigao.jpg" alt="イラスト">

  <div class="statement">
    <p class="statement-item" data-label="困り顔の男_供述①">
      <span class="label">供述①</span>

      <span class="input-area">
      	<input type="text" class="answer"
               data-correct="Te34Br36"
               data-keyword="俺は仕事があったから遅れて来たんだけど、来た時には既に寿司桶は和室に置かれてました。">
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>

    <p class="statement-item" data-label="困り顔の男_供述②">
      <span class="label">供述②</span>

      <span class="input-area">
        <input type="text" class="answer"
               data-correct="683"
               data-keyword="俺はオムラ邸に着いてすぐにベランダの戸を空け、たたみの部屋に入ってふすまを全て閉めました。そのときリスニング少女が同時に入ってきました。もちろん玄関は開けたままにしました。"> 
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>

    <p class="statement-item" data-label="困り顔の男_供述③">
      <span class="label">供述③</span>

      <span class="input-area">
        <input type="text" class="answer"
               data-correct="すなどけい"
               data-keyword="俺がたたみの部屋に入った後は追加で誰も来てないです。"> 
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>
  </div>
</div>

<p>-----------------------------</p>

<p>【怪しい女】</p>

<div class="suspect-box">
  <img src="ayasii.jpg" alt="イラスト">

  <div class="statement">
    <p class="statement-item" data-label="怪しい女_供述①">
      <span class="label">供述①</span>

      <span class="input-area">
      	<input type="text" class="answer"
               data-correct="3021"
               data-keyword="私は寿司を食す際のこだわりが常軌を逸脱しているの。だし醤油とわさびを8:2に調合したものに付けて食べないと気が済まないの。ふふっ。">
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>

    <p class="statement-item" data-label="怪しい女_供述②">
      <span class="label">供述②</span>

      <span class="input-area">
        <input type="text" class="answer"
               data-correct="なっつ"
               data-keyword="一回だけ和室に入ろうとおもったけど、鍵がしまっていて断念したの。全くむかつくわね。"> 
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>

  </div>
</div>

<p>-----------------------------</p>

<p>【無関心な姉】</p>

<div class="suspect-box">
  <img src="mukannsin.jpg" alt="イラスト">

  <div class="statement">
    <p class="statement-item" data-label="無関心な姉_供述①">
      <span class="label">供述①</span>

      <span class="input-area">
      	<input type="text" class="answer"
               data-correct="HAIR"
               data-keyword="寿司が届いてから？うーん...スマホを見てたかな。和室でゴロゴロしてただけ。">
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>

    <p class="statement-item" data-label="無関心な姉_供述②">
      <span class="label">供述②</span>

      <span class="input-area">
        <input type="text" class="answer"
               data-correct="398"
               data-keyword="寿司とかが運ばれてきたから、場所を開けるためにリビングに移動したけど何？あと、私が出てから和室のふすまが閉められるまでの間は誰も和室に行かなかったかな。その間はソファに座って和室の方見てたけど、確かそのはず。"> 
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>

  </div>
</div>

<p>-----------------------------</p>

<p>【リスニング少女】</p>

<div class="suspect-box">
  <img src="listening.jpg" alt="イラスト">

  <div class="statement">
    <p class="statement-item" data-label="リスニング少女_供述①">
      <span class="label">供述①</span>

      <span class="input-area">
      	<input type="text" class="answer"
               data-correct="BIRD"
               data-keyword="最初に寿司が運ばれてきたとき、私はたたみの部屋の座布団で寝っ転がって動画見てたよ。あと、私は寿司の中でいくらだけは無理だよ。">
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>

    <p class="statement-item" data-label="リスニング少女_供述②">
      <span class="label">供述②</span>

      <span class="input-area">
        <input type="text" class="answer"
               data-correct="170s3"
               data-keyword="仕事から困り顔の男が帰ってきたあと、和室にいる間は一緒に遊んでたよ。その間、特に困り顔の男は怪しいことはしてなかったよ。"> 
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>

    <p class="statement-item" data-label="リスニング少女_供述③">
      <span class="label">供述③</span>

      <span class="input-area">
        <input type="text" class="answer"
               data-correct="3950"
               data-keyword="後半の最後の方に、私と困り顔の男が一緒に物置部屋からリビングに向かうとき、トイレから出た婆に会って、私たちは玄関でずっと立ち話してたよ。そういえば物置部屋を通った時、何か視線を感じたなぁ..."> 
      <button class="send">送信</button></span>

      <span class="result"></span>
    </p>
  </div>
</div>

<p id="result"></p>

<hr>

<h2>最終推理</h2>

<div class="final-container">
  <!-- 犯人選択 -->
  <div class="final-left">
    <div class="final-section">
      <p><strong>■ 犯人は誰？</strong></p>
      <select id="final-criminal">
        <option value="">選択してください</option>
        <option value="微笑む家主">微笑む家主</option>
        <option value="長電話婆">長電話婆</option>
        <option value="防寒男">防寒男</option>
        <option value="手を嗅ぐ女">手を嗅ぐ女</option>
        <option value="困り顔の男">困り顔の男</option>
        <option value="怪しい女">怪しい女</option>
        <option value="無関心な姉">無関心な姉</option>
        <option value="リスニング少女">リスニング少女</option>
      </select>
    </div>

  <!-- 犯行タイミング -->
    <div class="final-section">
      <p><strong>■ 犯行タイミング</strong></p>
      <select id="final-timing">
        <option value="">選択してください</option>
        <option value="前半">前半</option>
        <option value="後半">後半</option>
      </select>
    </div>

  <div class="final-section">
  <p><strong>■ 犯行ルート</strong><br>
       ・犯行現場から逆にたどって3か所<br>
       ・3か所未満の場合は「なし」を選択</p>

  <select class="route-select" id="route1">
    <option value="">選択してください</option>
    <option value="">なし</option>
    <option value="リビング">リビング</option>
    <option value="和室">和室</option>
    <option value="ダイニング">ダイニング</option>
    <option value="物置部屋">物置部屋</option>
    <option value="台所">台所</option>
    <option value="洗面・脱衣">洗面・脱衣</option>
    <option value="トイレ">トイレ</option>
    <option value="浴室">浴室</option>
    <option value="階段">階段</option>
    <option value="玄関">玄関</option>
    <option value="ベランダ">ベランダ</option>
    <option value="車庫">車庫</option>
  </select>
<br>
  　　　　↓ <br>
  <select class="route-select" id="route2">
    <option value="">選択してください</option>
    <option value="">なし</option>
    <option value="リビング">リビング</option>
    <option value="和室">和室</option>
    <option value="ダイニング">ダイニング</option>
    <option value="物置部屋">物置部屋</option>
    <option value="台所">台所</option>
    <option value="洗面・脱衣">洗面・脱衣</option>
    <option value="トイレ">トイレ</option>
    <option value="浴室">浴室</option>
    <option value="階段">階段</option>
    <option value="玄関">玄関</option>
    <option value="ベランダ">ベランダ</option>
    <option value="車庫">車庫</option>
  </select>
<br>
  　　　　↓ <br>
  <select class="route-select" id="route3">
    <option value="">選択してください</option>
    <option value="">なし(その場での犯行)</option>
    <option value="リビング">リビング</option>
    <option value="和室">和室</option>
    <option value="ダイニング">ダイニング</option>
    <option value="物置部屋">物置部屋</option>
    <option value="台所">台所</option>
    <option value="洗面・脱衣">洗面・脱衣</option>
    <option value="トイレ">トイレ</option>
    <option value="浴室">浴室</option>
    <option value="階段">階段</option>
    <option value="玄関">玄関</option>
    <option value="ベランダ">ベランダ</option>
    <option value="車庫">車庫</option>
  </select>
<br>
  　　　　↓ <br>
  <strong id="crime-room">（犯行現場）</strong>
</div>
</div>

  <div class="final-right">
    <img src="map.jpg" alt="間取り図">

    <button id="final-check">推理を確定する</button>
　　
　　<button id="final-submit" style="display:none;">
      回答を送信
　　</button>

　　<p id="final-result"></p>
  </div>
</div>


<script>
const buttons = document.querySelectorAll(".send");

buttons.forEach(btn => {
  btn.addEventListener("click", () => {
    const item = btn.closest(".statement-item");
    const input = item.querySelector(".answer");
    const inputArea = item.querySelector(".input-area");
    const result = item.querySelector(".result");
    const textArea = result.querySelector(".keyword-text");
    const image = result.querySelector(".keyword-image");

    const user = input.value.trim();
    const correct = input.dataset.correct;
    const keyword = input.dataset.keyword;

    if (!user) {
      result.textContent = "入力してね";
      result.style.color = "black";
      return;
    }

    if (user === correct) {
      inputArea.style.display = "none";

      if (textArea) {
        textArea.innerHTML = `<strong>${keyword}</strong>`;
      } else {
        result.insertAdjacentHTML(
          "afterbegin",
          `<div class="keyword-text"><strong>${keyword}</strong></div>`
        );
      }

      if (image) {
        image.style.display = "block";
        if (!image && item.dataset.label === "防寒男_供述②") {
          result.insertAdjacentHTML(
           "beforeend",
    `       <img src="sisen.jpg" class="keyword-image" style="display:block;">`
         );
      }

      }

      result.style.color = "green";
} else {
  result.style.color = "red";

  let textArea = result.querySelector(".keyword-text");
  if (!textArea) {
    result.insertAdjacentHTML(
      "afterbegin",
      `<div class="keyword-text">✖</div>`
    );
  } else {
    textArea.textContent = "✖";
  }
}

  });
});


document.getElementById("final-check").addEventListener("click", () => {
  const criminal = document.getElementById("final-criminal").value;
  const timing = document.getElementById("final-timing").value;

  const route1 = document.getElementById("route1").value;
  const route2 = document.getElementById("route2").value;
  const route3 = document.getElementById("route3").value;
  const crimeRoom = document.getElementById("crime-room").textContent;

  if (!criminal || !timing || !route1 || !route2 || !route3 || crimeRoom.includes("犯行")) {
    document.getElementById("final-result").textContent =
      "すべて選択してください。";
    return;
  }

  document.getElementById("final-result").innerHTML =
    `あなたの推理：<br>
     犯人：<strong>${criminal}</strong><br>
     犯行タイミング：<strong>${timing}</strong><br>
     犯行ルート：<strong>${route1} → ${route2} → ${route3} → ${crimeRoom}</strong>`;

  document.getElementById("final-submit").style.display = "inline-block";
});


const timingSelect = document.getElementById("final-timing");
const crimeRoomSpan = document.getElementById("crime-room");

timingSelect.addEventListener("change", () => {
  if (timingSelect.value === "前半") {
    crimeRoomSpan.textContent = "ダイニング";
  } else if (timingSelect.value === "後半") {
    crimeRoomSpan.textContent = "和室";
  } else {
    crimeRoomSpan.textContent = "（犯行現場）";
  }
});

document.getElementById("final-submit").addEventListener("click", (event) => {
  // ★ フォーム送信を止める
  event.preventDefault();

  const criminal = document.getElementById("final-criminal").value;
  const timing = document.getElementById("final-timing").value;

  const rooms = [
    document.getElementById("route1").value,
    document.getElementById("route2").value,
    document.getElementById("route3").value,
    document.getElementById("crime-room").textContent
  ];

  const correctCriminal = "無関心な姉";
  const correctTiming = "後半";
  const correctRooms = ["車庫", "玄関", "物置部屋", "和室"];

  const roomsMatch =
    rooms.length === correctRooms.length &&
    correctRooms.every(r => rooms.includes(r));

  // ★ 正解判定
if (criminal === correctCriminal && timing === correctTiming && roomsMatch) {

  const sound = document.getElementById("success-sound");
  if (sound) {
    sound.currentTime = 0;
    sound.play().catch(() => {});
  }

  // ★ 暗転開始
  const fade = document.getElementById("fade");
  if (fade) fade.classList.add("active");

  // ★ 暗転完了後に遷移
  setTimeout(() => {
    window.location.href = "jfdbclisbr.html";
  }, 800);
}

else {
    document.getElementById("final-result").innerHTML =
      "<strong style='color:red;'>❌ 不正解…もう一度供述を見直そう。</strong>";
  }
});

</script>

<audio id="success-sound" src="sound/success.mp3" preload="auto"></audio>
<div id="fade"></div>

</body>
</html>








